import{c as h,j as e,u as w,R as v,r as N,L as S}from"./index-DXgnGpbQ.js";import{S as A}from"./shield-check-C8N9_uIw.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],C=h("activity",R);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],F=h("chevron-down",E);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],b=h("funnel",I);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],P=h("search",_);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}]],$=h("sparkle",z);function L({currentSize:s,sizes:a,onChange:r}){return e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:s,onChange:t=>r(parseInt(t.target.value)),className:"appearance-none bg-[rgba(255,255,255,0.04)] border border-[rgba(255,26,26,0.25)] text-sm text-white rounded-lg px-3 py-2 pr-8 outline-none",children:a.map(t=>e.jsxs("option",{value:t,className:"bg-[#0a0a0a]",children:[t," / page"]},t))}),e.jsx(F,{className:"pointer-events-none absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-[var(--text-secondary)]"})]})}const D=[12,24,48,99];function K(){const s=w(),a=v.useSearch(),{agents:r,stats:t,totalAgents:c,totalPages:d,page:l,pageSize:p,hasActiveFilters:i,searchTerm:o}=v.useLoaderData(),[x,m]=N.useState(o),f=N.useMemo(()=>t!=null&&t.totalFeedback?parseInt(t.totalFeedback):0,[t]),y=n=>{n.preventDefault(),s({to:"/",search:{...a,search:x.trim(),page:1}})},j=n=>{s({to:"/",search:{...a,[n]:!a[n],page:1}})},k=()=>{s({to:"/",search:{search:"",page:1,perPage:p,hasEndpoint:!1,hasReviews:!1}})},u=n=>{s({to:"/",search:{...a,page:Math.min(Math.max(1,n),d)}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("section",{className:"glass-panel glass-content p-6",children:e.jsxs("div",{className:"hero",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"badge mb-3",children:[e.jsx($,{size:14}),"Agent Risk & Reputation Explorer"]}),e.jsx("h1",{className:"hero-title",children:"Trust signals for ERC-8004 & x402 agent payments"}),e.jsx("p",{className:"hero-subtitle",children:"Visualize payment intents per agent, track disputes and refunds, and aggregate trust scores before approving spend. Built for Kite/Youmio/TURF and third-party UIs to quickly ask for an agent's risk profile."}),e.jsxs("div",{className:"cta-row",children:[e.jsx("button",{onClick:()=>u(1),children:"Explore agents"}),e.jsx("a",{className:"btn ghost-btn",href:"https://eips.ethereum.org/EIPS/eip-8004",target:"_blank",rel:"noreferrer",children:"Read ERC-8004 spec"})]})]}),e.jsx("div",{className:"glass-panel glass-content p-5 shimmer-border",children:e.jsxs("div",{className:"stats-grid",children:[e.jsx(g,{label:"Registered agents",value:c,helper:"On-chain ERC-8004 records"}),e.jsx(g,{label:"Feedback entries",value:f,helper:"Reviews, disputes, refunds"}),e.jsx(g,{label:"Realtime posture",value:"x402",helper:"Payment intents & risk tiers"}),e.jsx(g,{label:"API ready",value:"Agentscope SDK",helper:"Query risk before approving spend"})]})})]})}),e.jsx("section",{className:"glass-panel glass-content p-5",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-secondary)]",children:[e.jsx(b,{size:16}),"Filters & search",i&&e.jsx("span",{className:"badge",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{currentSize:p,sizes:D,onChange:n=>s({to:"/",search:{...a,perPage:n,page:1}})}),i&&e.jsx("button",{className:"ghost-btn",onClick:k,children:"Clear"})]})]}),e.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 gap-3 md:grid-cols-[1fr_auto_auto]",children:[e.jsxs("label",{className:"relative block",children:[e.jsx(P,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-[var(--text-secondary)]"}),e.jsx("input",{value:x,onChange:n=>m(n.target.value),placeholder:"Search agents, names, endpoints..."})]}),e.jsx("button",{type:"submit",children:"Search"}),e.jsx("button",{type:"button",className:`btn ${a.hasReviews?"":"ghost-btn"}`,onClick:()=>j("hasReviews"),children:"Reviews only"}),e.jsx("button",{type:"button",className:`btn ${a.hasEndpoint?"":"ghost-btn"}`,onClick:()=>j("hasEndpoint"),children:"API ready"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-[var(--text-secondary)]",children:[e.jsx(b,{size:16}),i?e.jsxs("span",{children:[c.toLocaleString()," matching agents for",o?` “${o}”`:""," ",a.hasReviews?"with reviews":""," ",a.hasEndpoint?"with endpoints":""]}):e.jsxs("span",{children:[c.toLocaleString()," registered agents on Sepolia"]})]})]})}),e.jsx("section",{className:"space-y-4",children:r.length===0?e.jsx("div",{className:"glass-panel glass-content p-10 text-center text-[var(--text-secondary)]",children:"No agents found. Adjust filters or reset search."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"agent-grid",children:r.map(n=>e.jsx(M,{agent:n},n.id))}),e.jsxs("div",{className:"glass-panel glass-content p-4 flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:["Page ",l," of ",d]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l>1&&e.jsx("button",{className:"ghost-btn",onClick:()=>u(l-1),children:"Previous"}),l<d&&e.jsx("button",{onClick:()=>u(l+1),children:"Next"})]})]})]})})]})}function g({label:s,value:a,helper:r}){return e.jsxs("div",{className:"glass-panel glass-content p-4",children:[e.jsx("div",{className:"stat-number",children:typeof a=="number"?a.toLocaleString():a}),e.jsx("div",{className:"stat-label",children:s}),e.jsx("div",{className:"mt-1 text-xs text-[var(--text-secondary)]",children:r})]})}function M({agent:s}){var l,p,i,o,x;const a=((l=s.registrationFile)==null?void 0:l.name)||`Agent #${s.agentId}`,r=(p=s.registrationFile)==null?void 0:p.description,t=((i=s.registrationFile)==null?void 0:i.supportedTrusts)||[],c=parseInt(s.totalFeedback),d=((o=s.registrationFile)==null?void 0:o.mcpEndpoint)||((x=s.registrationFile)==null?void 0:x.a2aEndpoint);return e.jsxs(S,{to:"/agent/$id",params:{id:s.id},className:"glass-panel glass-content agent-card",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"truncate text-lg font-semibold",children:a}),e.jsxs("p",{className:"text-xs text-[var(--text-secondary)]",children:["ID: ",s.agentId]})]}),e.jsxs("div",{className:"flex gap-1.5",children:[d&&e.jsx("span",{className:"badge text-xs",children:"API"}),c>0&&e.jsxs("span",{className:"badge text-xs",children:[c," feedback"]})]})]}),r&&e.jsx("p",{className:"text-sm text-[var(--text-secondary)] line-clamp-3",children:r}),t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.slice(0,3).map(m=>e.jsx("span",{className:"tag",children:m},m))}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"card-meta",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{size:14,color:"var(--primary)"}),T(s.owner)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{size:14,color:"var(--primary)"}),q(s.createdAt)]})]})]})}function T(s){return`${s.slice(0,6)}...${s.slice(-4)}`}function q(s){return new Date(parseInt(s)*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}export{K as component};
